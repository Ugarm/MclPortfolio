{# templates/modal.html.twig #}

<!-- Modal Structure -->
<div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white rounded-lg p-6 max-w-2xl w-full">
        <h2 id="modal-title" class="text-2xl font-bold mb-4"></h2>
        <div id="modal-content">
            <!-- Content will be dynamically inserted here -->
        </div>
        <button onclick="closeModal()" class="mt-4 px-4 py-2 bg-red-500 text-white rounded-lg">Close</button>
    </div>
</div>

<script>
    function openModal(publication) {
        // Get the modal and its elements
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');

        // Set the modal title
        modalTitle.textContent = publication.title;

        // Set the modal content based on the file type
        if (publication.fileType === 'image') {
            modalContent.innerHTML = `
                <img class="w-full h-auto rounded-lg" src="/uploads/images/${publication.fileName}" alt="${publication.title}">
            `;
        } else if (publication.fileType === 'video') {
            modalContent.innerHTML = `
                <video controls class="w-full h-auto rounded-lg">
                    <source src="/uploads/images/${publication.fileName}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            `;
        }

        // Display the modal
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function closeModal() {
        const modal = document.getElementById('modal');
        modal.classList.remove('flex');
        modal.classList.add('hidden');
    }
</script>